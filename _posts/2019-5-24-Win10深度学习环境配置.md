---
layout: article
title: Win10 深度学习环境配置
tags: 环境配置
mode: immersive
lightbox: true
header:
  theme: dark
article_header:
  type: overlay
  theme: dark
  background_color: '#203028'
  background_image:
    gradient: 'linear-gradient(135deg, rgba(34, 139, 87 , .4), rgba(139, 34, 139, .4))'
    src: http://pxdy964t4.bkt.clouddn.com/290580.jpg
---

<br/>
<br/>
从全新电脑开始 - Win10基于anaconda的tensorflow与pytorch环境配置
<!--more-->

<br/>
之前的电脑是华为 Matebook X，轻薄是真的很轻薄，拧不开瓶盖的人可以单手拎着到处跑，同配置比苹果便宜2000左右，但内存和GPU都不能满足跑代码的需求，于是入手了拯救者y7000p，内存16G（最大32G）、CPU i7、GPU GTX1060、SSD 256G。现在两个笔记本 + 配了电容笔的iPad就完美满足日常需求了。
（吐槽一句挑战者真的蛮贵，神舟低2000元左右可以买到2060Ti的显卡）

这篇就用来记录一下拿到电脑之后配置anaconda相关环境的过程。win10系统到手前已经装好。

<br/>
## Anaconda安装

<br/>
官网安装下载一路next即可：[Anaconda下载链接](https://www.anaconda.com/distribution/)

<br/>
<br/>
## Visual Studio安装

<br/>
实际操作时被迫放在了Tensorflow安装的过程中 —— 安装到CUDA时才发现需要VS环境，于是又回过头来配置环境。（卸载CUDA也是折腾了一番）

依然官网下载一路点next：[VS下载链接](https://docs.microsoft.com/zh-cn/visualstudio/install/install-visual-studio?view=vs-2019)

截至2019-5-25，**VS2019 和 CUDA10.0不兼容**，如果要安装CUDA10.0，目前只能用 Visual Studio 2017。

<br/>
<br/>
## GPU-Tensorflow安装

<br/>
打开安装好的Anaconda Prompt

1.  anaconda中建立tensorflow环境

    `conda create -n tensorflow pip python=3.6`
  
    这里选择了python 3.6，因为python 3.7对于Tensorflow存在部分不支持的问题。

<br/>

2.  激活刚刚建立的环境并在其中安装tensorflow

    `activate tensorflow`
  
    `conda install tensorflow-gpu`
  
    检测一下是否安装成功。在Tensorflow环境下输入 `python` ，运行如下代码：
    
    ```python
    import tensorflow as tf
    a = tf.constant('Hello, TensorFlow!')
    sess = tf.Session()
    print(sess.run(a))
    ```
    
    运行成功则说明成功安装tensorflow，但我们还需要CUDA和cuDNN
    
 <br/>
 
 3.  下载安装CUDA
 
     根据安装的tensorflow版本以及[官网](https://www.tensorflow.org/install#requirements_to_run_tensorflow_with_gpu_support)的描述，选择对应版本的CUDA。我安装的tensorflow为1.13.1，根据官网描述，支持的CUDA版本为10.0（在网上看到有人已经配置了10.1的CUDA，但过程很复杂，直接安装还有bug，出于稳定的考虑选择了低一级10.0）
     
     CUDA下载链接：[CUDA Toolkit Archive](https://developer.nvidia.com/cuda-toolkit-archive)
     
     一些教程推荐自定义安装，并且取消勾选VS的选项，还有教程推荐先卸载原本的显卡驱动，我在实际操作时都没有做，如果安装过程中出现问题的话可以去找参考教程1里面的步骤。
     
     检测一下是否安装成功：
     
     *  打开cmd，输入 `nvcc -V` 后显示CUDA版本号，就标志了初步的胜利。
     
        ![](http://pxdy964t4.bkt.clouddn.com/1.png)
     
     *  第二步验证，我们要成功运行CUDA_Samples，这里坑了我很多时间。
